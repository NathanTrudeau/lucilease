<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucilease</title>
  <style>
    :root {
      --bg:       #0f1117;
      --surface:  #1a1d27;
      --border:   #2a2d3a;
      --accent:   #6c63ff;
      --accent2:  #a78bfa;
      --text:     #e2e8f0;
      --muted:    #64748b;
      --green:    #22c55e;
      --yellow:   #f59e0b;
      --red:      #ef4444;
      --sidebar-w: 220px;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      height: 100vh;
      overflow: hidden;
      font-size: 14px;
    }

    /* â”€â”€ Sidebar â”€â”€ */
    aside {
      width: var(--sidebar-w);
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
    }

    .logo {
      padding: 24px 20px 20px;
      border-bottom: 1px solid var(--border);
    }

    .logo h1 {
      font-size: 20px;
      font-weight: 700;
      color: var(--accent2);
      letter-spacing: -0.5px;
    }

    .logo p {
      font-size: 11px;
      color: var(--muted);
      margin-top: 2px;
    }

    nav {
      padding: 12px 8px;
      flex: 1;
    }

    nav a {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 9px 12px;
      border-radius: 8px;
      color: var(--muted);
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
      margin-bottom: 2px;
    }

    nav a:hover { background: var(--border); color: var(--text); }
    nav a.active { background: rgba(108, 99, 255, 0.15); color: var(--accent2); }

    nav a .icon { font-size: 16px; width: 20px; text-align: center; }

    .badge {
      margin-left: auto;
      background: var(--accent);
      color: #fff;
      font-size: 10px;
      font-weight: 700;
      padding: 1px 6px;
      border-radius: 20px;
      min-width: 18px;
      text-align: center;
    }

    .sidebar-footer {
      padding: 16px;
      border-top: 1px solid var(--border);
      font-size: 11px;
      color: var(--muted);
    }

    .status-dot {
      display: inline-block;
      width: 7px; height: 7px;
      border-radius: 50%;
      background: var(--green);
      margin-right: 6px;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.4; }
    }

    /* â”€â”€ Main â”€â”€ */
    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    header {
      padding: 18px 28px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: var(--surface);
    }

    header h2 { font-size: 16px; font-weight: 600; }
    header p  { font-size: 12px; color: var(--muted); margin-top: 2px; }

    .header-actions { display: flex; gap: 10px; }

    button {
      background: var(--accent);
      color: #fff;
      border: none;
      padding: 7px 14px;
      border-radius: 7px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: opacity 0.15s;
    }

    button:hover { opacity: 0.85; }
    button.secondary { background: var(--border); color: var(--text); }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 28px;
    }

    /* â”€â”€ Stats row â”€â”€ */
    .stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-bottom: 28px;
    }

    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 18px 20px;
    }

    .stat-card .label { font-size: 11px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
    .stat-card .value { font-size: 28px; font-weight: 700; margin-top: 6px; }
    .stat-card .sub   { font-size: 11px; color: var(--muted); margin-top: 4px; }

    /* â”€â”€ Panel â”€â”€ */
    .panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      overflow: hidden;
    }

    .panel-header {
      padding: 14px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 13px;
      font-weight: 600;
    }

    .panel-body { padding: 0; }

    /* â”€â”€ Table â”€â”€ */
    table { width: 100%; border-collapse: collapse; }
    th {
      text-align: left;
      font-size: 11px;
      font-weight: 600;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 10px 20px;
      border-bottom: 1px solid var(--border);
    }
    td {
      padding: 12px 20px;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
      vertical-align: middle;
    }
    tr:last-child td { border-bottom: none; }
    tr:hover td { background: rgba(255,255,255,0.02); }

    .tag {
      display: inline-block;
      font-size: 10px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 20px;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }
    .tag.new      { background: rgba(108,99,255,0.2); color: var(--accent2); }
    .tag.handled  { background: rgba(34,197,94,0.15); color: var(--green); }
    .tag.rental   { background: rgba(245,158,11,0.15); color: var(--yellow); }
    .tag.sale     { background: rgba(239,68,68,0.15); color: var(--red); }
    .tag.active   { background: rgba(34,197,94,0.15); color: var(--green); }

    .empty-state {
      text-align: center;
      padding: 48px 20px;
      color: var(--muted);
    }
    .empty-state .icon { font-size: 36px; margin-bottom: 12px; }
    .empty-state p { font-size: 13px; }

    /* â”€â”€ Page sections (hidden unless active) â”€â”€ */
    .page { display: none; }
    .page.active { display: block; }
  </style>
</head>
<body>

<!-- Sidebar -->
<aside>
  <div class="logo">
    <h1>Lucilease</h1>
    <p>Real Estate AI Assistant</p>
  </div>

  <nav>
    <a class="active" onclick="showPage('dashboard', this)">
      <span class="icon">ğŸ </span> Dashboard
    </a>
    <a onclick="showPage('inbox', this)">
      <span class="icon">ğŸ“¬</span> Inbox
      <span class="badge" id="inbox-badge">0</span>
    </a>
    <a onclick="showPage('clients', this)">
      <span class="icon">ğŸ‘¥</span> Clients
    </a>
    <a onclick="showPage('properties', this)">
      <span class="icon">ğŸ¢</span> Properties
    </a>
    <a onclick="showPage('calendar', this)">
      <span class="icon">ğŸ“…</span> Calendar
    </a>
    <a onclick="showPage('settings', this)">
      <span class="icon">âš™ï¸</span> Settings
    </a>
  </nav>

  <div class="sidebar-footer">
    <span class="status-dot"></span> System running
  </div>
</aside>

<!-- Main -->
<main>

  <!-- Dashboard -->
  <div id="page-dashboard" class="page active">
    <header>
      <div>
        <h2>Dashboard</h2>
        <p id="header-date">â€”</p>
      </div>
      <div class="header-actions">
        <button class="secondary" onclick="refreshStats()">â†» Refresh</button>
      </div>
    </header>
    <div class="content">
      <div class="stats">
        <div class="stat-card">
          <div class="label">New Leads</div>
          <div class="value" id="stat-leads-new">â€”</div>
          <div class="sub">Awaiting review</div>
        </div>
        <div class="stat-card">
          <div class="label">Total Leads</div>
          <div class="value" id="stat-leads-total">â€”</div>
          <div class="sub">All time</div>
        </div>
        <div class="stat-card">
          <div class="label">Clients</div>
          <div class="value" id="stat-clients">â€”</div>
          <div class="sub">Active contacts</div>
        </div>
        <div class="stat-card">
          <div class="label">Properties</div>
          <div class="value" id="stat-properties">â€”</div>
          <div class="sub">Active listings</div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-header">
          Recent Leads
          <button onclick="showPage('inbox', document.querySelector('nav a:nth-child(2)'))">View all</button>
        </div>
        <div class="panel-body" id="recent-leads-table">
          <div class="empty-state">
            <div class="icon">ğŸ“­</div>
            <p>No leads yet. Gmail integration coming in Phase 1.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Inbox -->
  <div id="page-inbox" class="page">
    <header>
      <div>
        <h2>Inbox</h2>
        <p>Incoming lead emails</p>
      </div>
      <div class="header-actions">
        <button class="secondary">â†» Check now</button>
        <button>âœ Draft all replies</button>
      </div>
    </header>
    <div class="content">
      <div class="panel">
        <div class="panel-header">New Leads</div>
        <div class="panel-body" id="leads-table-body">
          <div class="empty-state">
            <div class="icon">ğŸ“¬</div>
            <p>Gmail not connected yet. Configure it in Settings.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Clients -->
  <div id="page-clients" class="page">
    <header>
      <div>
        <h2>Clients</h2>
        <p>Your contact list</p>
      </div>
      <div class="header-actions">
        <button>+ Add Client</button>
      </div>
    </header>
    <div class="content">
      <div class="panel">
        <div class="panel-header">All Clients</div>
        <div class="panel-body" id="clients-table-body">
          <div class="empty-state">
            <div class="icon">ğŸ‘¥</div>
            <p>No clients yet. They'll appear here as leads come in.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Properties -->
  <div id="page-properties" class="page">
    <header>
      <div>
        <h2>Properties</h2>
        <p>Your active listings</p>
      </div>
      <div class="header-actions">
        <button>+ Add Property</button>
      </div>
    </header>
    <div class="content">
      <div class="panel">
        <div class="panel-header">Active Listings</div>
        <div class="panel-body" id="properties-table-body">
          <div class="empty-state">
            <div class="icon">ğŸ¢</div>
            <p>No properties yet. Add your listings to get started.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Calendar -->
  <div id="page-calendar" class="page">
    <header>
      <div>
        <h2>Calendar</h2>
        <p>Upcoming appointments</p>
      </div>
    </header>
    <div class="content">
      <div class="panel">
        <div class="panel-body">
          <div class="empty-state">
            <div class="icon">ğŸ“…</div>
            <p>Google Calendar integration coming in Phase 4.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings -->
  <div id="page-settings" class="page">
    <header>
      <div>
        <h2>Settings</h2>
        <p>Configure your Lucilease agent</p>
      </div>
    </header>
    <div class="content">
      <div class="panel">
        <div class="panel-body">
          <div class="empty-state">
            <div class="icon">âš™ï¸</div>
            <p>Setup wizard coming in Phase 5.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

</main>

<script>
  // â”€â”€ Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showPage(name, el) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('nav a').forEach(a => a.classList.remove('active'));
    document.getElementById('page-' + name).classList.add('active');
    if (el) el.classList.add('active');
  }

  // â”€â”€ Stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  async function refreshStats() {
    try {
      const res = await fetch('/api/stats');
      const d = await res.json();
      document.getElementById('stat-leads-new').textContent   = d.leads_new;
      document.getElementById('stat-leads-total').textContent = d.leads_total;
      document.getElementById('stat-clients').textContent     = d.clients;
      document.getElementById('stat-properties').textContent  = d.properties;
      document.getElementById('inbox-badge').textContent      = d.leads_new;
    } catch(e) {
      console.error('Stats fetch failed', e);
    }
  }

  // â”€â”€ Init â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('header-date').textContent = new Date().toLocaleDateString('en-US', {
    weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
  });

  refreshStats();
  setInterval(refreshStats, 30000);
</script>
</body>
</html>
